<!DOCTYPE html>
<html>
    <head>
        <title>Tournament Dashboard - v0.1.2</title>
        <meta name="description" content="Enhance your Pokémon Tournament's stream overlays with this online OBS plugin!">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta property="og:title" content="Tournament Dashboard - v0.1.2!">
        <meta property="og:image" content="https://www.skeletom.net/pkmn/tournament-overlay/img/pkmn/poke_icon_0.png">
        <meta property="og:type" content="website">
        <meta property="og:description" content="Enhance your Pokémon Tournament's stream overlays with this online OBS plugin!">
        <link rel="icon" type="image/x-icon" href="favicon.ico">
        <link rel="stylesheet" href="./css/style.css">
        <datalist id="sceneOptions">
            <!-- Scenes in OBS -->
        </datalist>
        <datalist id="browserSourceOptions">
            <!-- Browser Sources in OBS -->
        </datalist>
        <datalist id="textSourceOptions">
            <!-- Text Sources in OBS -->
        </datalist>
        <datalist id="pokemonOptions">
            <!-- Every single Pokemon -->
        </datalist>
        <datalist id="itemOptions">
            <!-- Every single Hold Item -->
        </datalist>
    </head>
  <body>
    <div class="rounded-corner">
        <h1 class="heading rounded-corner-small">TourKOAL - v0.1.2</h1>
    </div>
    <div id="readme" class="rounded-corner">
        <div>
            <p>
                Welcome to <b>TourKOAL</b> (<b>Tour</b>nament <b>K</b>nowledge and <b>O</b>verlay <b>A</b>ssistant for <b>L</b>ivestreams)!
            </p>
            <p>
                The goal of this tool is to easily compile player and team information such that it can be quickly displayed on the fly during tournament matches, 
                helping you build a professional-quality overlay for your broadcast with as little manual work as possible. 
            </p>
            <p>
                No longer will you need to scramble through hundreds of image files by hand as players reveal which of their Pokemon they brought to the game, 
                nor will you need to manually adjust OBS sources when items are consumed or Pokemon faint! 
            </p>
                <h3>Getting Started</h3>
        </div>
        <ol>
            <li>Make sure that your OBS WebSocket Server is Enabled (accessed via Tools → WebSocket Server Settings).</li>
            <ul>
                <li>For OBS Versions >28.0.0, OBS WebSocket Server is built-in.</li>
                <li>For older OBS Versions, you can <a href="https://github.com/obsproject/obs-websocket/releases">download a plugin.</a></li>
            </ul>
            <li><a href="#obs_settings">Connect to OBS</a>.
            <li>Choose which <a href=#obs_scene_selection>OBS Scene</a> your Tournament Overlay is in.</li>
            <li>Pick <a href="#dashboard">sources in that scene to output to</a> (Pokémon icons are Browser sources, everything else is a Text source).</li>
            <li>Enter player data in the <a href="#players">table at the bottom of the page</a>.</li>
            <li>You're all set! <a href='#dashboard'>Pick your players from the dropdown</a> and easily display information about their team!</li>
        </ol>
    </div>
    <div id="obs_settings" class="flex flex-col rounded-corner">
        <div>
            <label for="connect" class="bold">OBS Status: <span id="obs_status" class="disconnected">Disconnected</span></label>
            <form>
                <input id="address" placeholder="Address" type="text" minlength="7" maxlength="15" value="localhost" pattern="^(localhost|((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5]))$" required>
                <input id="port" placeholder="Port" type="number" min="1" max="65535" size=5 value="4455">
                <input id="password" placeholder="Password (optional)" type="password">
                <button id="connect" type='button'>Connect to OBS</button>
            </form>
        </div>
        <div id="obs_scene_selection">
            <div>
                <label for="sceneSelect" class="bold">OBS Scene Selection</label>
            </div>
            <input id="sceneSelect" autoComplete="on" list="sceneOptions" type="text"/> 
        </div>
    </div>

    <div class="dashboard" id="dashboard">
        <div id="view" class="flex-row">
            <div id="player_1_dashboard" class="playerModule flex flex-col rounded-corner">
                <h2 class="heading rounded-corner-small">Player #1</h2>
                <div class="scoreModule">
                    <div class="scoreDisplay">0</div>
                    <button class="scoreButton plus square" type='button'>➕</button>
                    <button class="scoreButton minus square" type='button'>➖</button>
                    → <input class="sourceSelect" placeholder="Select OBS source..." autoComplete="on" list="textSourceOptions"/>
                </div>
                <div>
                    <div>
                        <label for="player_1_select" class="bold">Player #1</label>
                    </div>
                    <div class="nameModule">
                        <select class="playerSelect" id="player_1_select">
                            <optgroup label="Default">
                                <option>None</option>
                            </optgroup>
                            <optgroup label="Players" class="optionContent">

                            </optgroup>
                        </select> → 
                        <input class="sourceSelect" placeholder="Select OBS source..." autoComplete="on" list="textSourceOptions"/>
                    </div>
                </div>

                <div class="monModule">
                    <div class="flex">
                        <iframe class="monIcon" scrolling="no"></iframe>
                        <div class="monInputs">
                            <div>
                                <label class="bold">Mon #1</label>
                            </div>
                            <div>
                                <select class="monSelect">
                                    <optgroup label="Default">
                                        <option class="monOption">None</option>
                                    </optgroup>
                                    <optgroup label="Mons" class="optionContent">
                                        <option class="monOption">Mon1</option>
                                        <option class="monOption">Mon2</option>
                                        <option class="monOption">Mon3</option>
                                        <option class="monOption">Mon4</option>
                                        <option class="monOption">Mon5</option>
                                        <option class="monOption">Mon6</option>
                                    </optgroup>
                                </select> → 
                                <input class="sourceSelect" placeholder="Select OBS source..." autoComplete="on" list="browserSourceOptions"/>
                            </div>
                            <div>
                                <input class="itemSelect" placeholder="Held Item..." type="text" list="itemOptions">
                            </div>
                            <div class="font-small">
                                <label>Fainted?</label>
                                <input class="faintedToggle" type="checkbox">
                                <label>Item Used?</label>
                                <input class="itemToggle" type="checkbox">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="monModule">
                    <div class="flex">
                        <iframe class="monIcon" scrolling="no"></iframe>
                        <div class="monInputs">
                            <div>
                                <label class="bold">Mon #2</label>
                            </div>
                            <div>
                                <select class="monSelect">
                                    <optgroup label="Default">
                                        <option class="monOption">None</option>
                                    </optgroup>
                                    <optgroup label="Mons" class="optionContent">
                                        <option class="monOption">Mon1</option>
                                        <option class="monOption">Mon2</option>
                                        <option class="monOption">Mon3</option>
                                        <option class="monOption">Mon4</option>
                                        <option class="monOption">Mon5</option>
                                        <option class="monOption">Mon6</option>
                                    </optgroup>
                                </select> → 
                                <input class="sourceSelect" placeholder="Select OBS source..." autoComplete="on" list="browserSourceOptions"/>
                            </div>
                            <div>
                                <input class="itemSelect" placeholder="Held Item..." type="text" list="itemOptions">
                            </div>
                            <div class="font-small">
                                <label>Fainted?</label>
                                <input class="faintedToggle" type="checkbox">
                                <label>Item Used?</label>
                                <input class="itemToggle" type="checkbox">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="monModule">
                    <div class="flex">
                        <iframe class="monIcon" scrolling="no"></iframe>
                        <div class="monInputs">
                            <div>
                                <label class="bold">Mon #3</label>
                            </div>
                            <div>
                                <select class="monSelect">
                                    <optgroup label="Default">
                                        <option class="monOption">None</option>
                                    </optgroup>
                                    <optgroup label="Mons" class="optionContent">
                                        <option class="monOption">Mon1</option>
                                        <option class="monOption">Mon2</option>
                                        <option class="monOption">Mon3</option>
                                        <option class="monOption">Mon4</option>
                                        <option class="monOption">Mon5</option>
                                        <option class="monOption">Mon6</option>
                                    </optgroup>
                                </select> → 
                                <input class="sourceSelect" placeholder="Select OBS source..." autoComplete="on" list="browserSourceOptions"/>
                            </div>
                            <div>
                                <input class="itemSelect" placeholder="Held Item..." type="text" list="itemOptions">
                            </div>
                            <div class="font-small">
                                <label>Fainted?</label>
                                <input class="faintedToggle" type="checkbox">
                                <label>Item Used?</label>
                                <input class="itemToggle" type="checkbox">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="monModule">
                    <div class="flex">
                        <iframe class="monIcon" scrolling="no"></iframe>
                        <div class="monInputs">
                            <div>
                                <label class="bold">Mon #4</label>
                            </div>
                            <div>
                                <select class="monSelect">
                                    <optgroup label="Default">
                                        <option class="monOption">None</option>
                                    </optgroup>
                                    <optgroup label="Mons" class="optionContent">
                                        <option class="monOption">Mon1</option>
                                        <option class="monOption">Mon2</option>
                                        <option class="monOption">Mon3</option>
                                        <option class="monOption">Mon4</option>
                                        <option class="monOption">Mon5</option>
                                        <option class="monOption">Mon6</option>
                                    </optgroup>
                                </select> → 
                                <input class="sourceSelect" placeholder="Select OBS source..." autoComplete="on" list="browserSourceOptions"/>
                            </div>
                            <div>
                                <input class="itemSelect" placeholder="Held Item..." type="text" list="itemOptions">
                            </div>
                            <div class="font-small">
                                <label>Fainted?</label>
                                <input class="faintedToggle" type="checkbox">
                                <label>Item Used?</label>
                                <input class="itemToggle" type="checkbox">
                            </div>
                        </div>
                    </div>
                </div>

                <button class="resetButton" type='button'>Reset All Mons</button>
            </div>

            <div id="player_2_dashboard" class="playerModule flex flex-col rounded-corner">
                <h2 class="heading rounded-corner-small">Player #2</h2>
                <div class="scoreModule">
                    <div class="scoreDisplay">0</div>
                    <button class="scoreButton plus square" type='button'>➕</button>
                    <button class="scoreButton minus square" type='button'>➖</button>
                    → <input class="sourceSelect" placeholder="Select OBS source..." autoComplete="on" list="textSourceOptions"/>
                </div>
                <div>
                    <div>
                        <label for="player_2_select" class="bold">Player #2</label>
                    </div>
                    <div class="nameModule">
                        <select class="playerSelect" id="player_2_select">
                            <optgroup label="Default">
                                <option>None</option>
                            </optgroup>
                            <optgroup label="Players" class="optionContent">

                            </optgroup>
                        </select> → 
                        <input class="sourceSelect" placeholder="Select OBS source..." autoComplete="on" list="textSourceOptions"/>
                    </div>
                </div>

                <div class="monModule">
                    <div class="flex">
                        <iframe class="monIcon" scrolling="no"></iframe>
                        <div class="monInputs">
                            <div>
                                <label class="bold">Mon #1</label>
                            </div>
                            <div>
                                <select class="monSelect">
                                    <optgroup label="Default">
                                        <option class="monOption">None</option>
                                    </optgroup>
                                    <optgroup label="Mons" class="optionContent">
                                        <option class="monOption">Mon1</option>
                                        <option class="monOption">Mon2</option>
                                        <option class="monOption">Mon3</option>
                                        <option class="monOption">Mon4</option>
                                        <option class="monOption">Mon5</option>
                                        <option class="monOption">Mon6</option>
                                    </optgroup>
                                </select> → 
                                <input class="sourceSelect" placeholder="Select OBS source..." autoComplete="on" list="browserSourceOptions"/>
                            </div>
                            <div>
                                <input class="itemSelect" placeholder="Held Item..." type="text" list="itemOptions">
                            </div>
                            <div class="font-small">
                                <label>Fainted?</label>
                                <input class="faintedToggle" type="checkbox">
                                <label>Item Used?</label>
                                <input class="itemToggle" type="checkbox">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="monModule">
                    <div class="flex">
                        <iframe class="monIcon" scrolling="no"></iframe>
                        <div class="monInputs">
                            <div>
                                <label class="bold">Mon #2</label>
                            </div>
                            <div>
                                <select class="monSelect">
                                    <optgroup label="Default">
                                        <option class="monOption">None</option>
                                    </optgroup>
                                    <optgroup label="Mons" class="optionContent">
                                        <option class="monOption">Mon1</option>
                                        <option class="monOption">Mon2</option>
                                        <option class="monOption">Mon3</option>
                                        <option class="monOption">Mon4</option>
                                        <option class="monOption">Mon5</option>
                                        <option class="monOption">Mon6</option>
                                    </optgroup>
                                </select> → 
                                <input class="sourceSelect" placeholder="Select OBS source..." autoComplete="on" list="browserSourceOptions"/>
                            </div>
                            <div>
                                <input class="itemSelect" placeholder="Held Item..." type="text" list="itemOptions">
                            </div>
                            <div class="font-small">
                                <label>Fainted?</label>
                                <input class="faintedToggle" type="checkbox">
                                <label>Item Used?</label>
                                <input class="itemToggle" type="checkbox">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="monModule">
                    <div class="flex">
                        <iframe class="monIcon" scrolling="no"></iframe>
                        <div class="monInputs">
                            <div>
                                <label class="bold">Mon #3</label>
                            </div>
                            <div>
                                <select class="monSelect">
                                    <optgroup label="Default">
                                        <option class="monOption">None</option>
                                    </optgroup>
                                    <optgroup label="Mons" class="optionContent">
                                        <option class="monOption">Mon1</option>
                                        <option class="monOption">Mon2</option>
                                        <option class="monOption">Mon3</option>
                                        <option class="monOption">Mon4</option>
                                        <option class="monOption">Mon5</option>
                                        <option class="monOption">Mon6</option>
                                    </optgroup>
                                </select> → 
                                <input class="sourceSelect" placeholder="Select OBS source..." autoComplete="on" list="browserSourceOptions"/>
                            </div>
                            <div>
                                <input class="itemSelect" placeholder="Held Item..." type="text" list="itemOptions">
                            </div>
                            <div class="font-small">
                                <label>Fainted?</label>
                                <input class="faintedToggle" type="checkbox">
                                <label>Item Used?</label>
                                <input class="itemToggle" type="checkbox">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="monModule">
                    <div class="flex">
                        <iframe class="monIcon" scrolling="no"></iframe>
                        <div class="monInputs">
                            <div>
                                <label class="bold">Mon #4</label>
                            </div>
                            <div>
                                <select class="monSelect">
                                    <optgroup label="Default">
                                        <option class="monOption">None</option>
                                    </optgroup>
                                    <optgroup label="Mons" class="optionContent">
                                        <option class="monOption">Mon1</option>
                                        <option class="monOption">Mon2</option>
                                        <option class="monOption">Mon3</option>
                                        <option class="monOption">Mon4</option>
                                        <option class="monOption">Mon5</option>
                                        <option class="monOption">Mon6</option>
                                    </optgroup>
                                </select> → 
                                <input class="sourceSelect" placeholder="Select OBS source..." autoComplete="on" list="browserSourceOptions"/>
                            </div>
                            <div>
                                <input class="itemSelect" placeholder="Held Item..." type="text" list="itemOptions">
                            </div>
                            <div class="font-small">
                                <label>Fainted?</label>
                                <input class="faintedToggle" type="checkbox">
                                <label>Item Used?</label>
                                <input class="itemToggle" type="checkbox">
                            </div>
                        </div>
                    </div>
                </div>

                <button class="resetButton" type='button'>Reset All Mons</button>
            </div>
        </div>
        <div class="flex flex-col rounded-corner">
            <button class="resetAllButton" type='button'>Reset All Mons, Players and Scores</button>
        </div>
    </div>
<!-- Table -->
    <div class="rounded-corner">
        <h1 class="heading rounded-corner-small">Players and Teams</h1>
    </div>
    <div class="flex flex-col rounded-corner">
        <label for="playerImport" class="bold">Import Player List from TOM roster file</label>
        <span class="font-small">(These will be in your 'TOM/data/reports' directory!)</span>
        <div class="font-small">
            <label>Abbreviate names (ex. 'Tom Farro' → 'Tom F.') for... </label>
            <label for="abbreviateJuniorsToggle">Juniors?</label>
            <input id="abbreviateJuniorsToggle" class="generalSetting" type="checkbox">
            <label for="abbreviateSeniorsToggle">Seniors?</label>
            <input id="abbreviateSeniorsToggle" class="generalSetting" type="checkbox">
            <label for="abbreviateMastersToggle">Masters?</label>
            <input id="abbreviateMastersToggle" class="generalSetting" type="checkbox">
        </div>
        <div>
            <input id='playerImport' class="playerImport" placeholder="Import Player Roster from TOM..." type="file" accept=".html" pattern=".*(roster\.html)"><span id="playerImportStatus" class="font-small bold"></span>
        </div>
    </div>
    <div class="flex rounded-corner">
        <input id='playerFilter' class="playerFilter" placeholder="Filter by Player Name..." type="text">
    </div>
    <div id="players">
        <table>
            <tbody id="players_table">
                <tr id="players_table_header" class="table-header">
                    <th class="center square">
                        <div class="rounded-corner-small">
                            <button id="player_add" class="square" type='button'>➕</button>
                        </div>
                    </th>
                    <th>
                        <div class="rounded-corner-small">
                            <div>Player Name</div>
                        </div>
                    </th>
                    <th>                       
                        <div class="rounded-corner-small">
                            <div>Mon #1</div>
                        </div>
                    </th>
                    <th>
                        <div class="rounded-corner-small">
                            <div>Mon #2</div>
                        </div>
                    </th>
                    <th>
                        <div class="rounded-corner-small">
                            <div>Mon #3</div>
                        </div>
                    </th>
                    <th>
                        <div class="rounded-corner-small">
                            <div>Mon #4</div>
                        </div>
                    </th>
                    <th>
                        <div class="rounded-corner-small">
                            <div>Mon #5</div>
                        </div>
                    </th>
                    <th>
                        <div class="rounded-corner-small">
                            <div>Mon #6</div>
                        </div>
                    </th>
                </tr>
            <!-- Want to add new rows starting here -->
                <template id="player_template_row">
                    <tr id="player_x_row" class="playerRow">
                        <td>
                            <div class="flex center rounded-corner-small">
                                <button id="player_x_delete" class="square" type='button'>❌</button>
                            </div>
                        </td>
                        <td>
                            <div class='flex-col center rounded-corner-small'>
                                <input id="player_x_name" class="playerName" placeholder="Player Name" type="text">
                            </div>
                        </td>
                        <td>
                            <div class='flex-col center rounded-corner-small'>
                                <input id="player_x_mon_1" placeholder="Mon #1" type="text" list="pokemonOptions">
                                <input id="player_x_mon_1_item" placeholder="Held Item (optional)" type="text" list="itemOptions">
                            </div>
                        </td>
                        <td>
                            <div class='flex-col center rounded-corner-small'>
                                <input id="player_x_mon_2" placeholder="Mon #2" type="text" list="pokemonOptions">
                                <input id="player_x_mon_2_item" placeholder="Held Item (optional)" type="text" list="itemOptions">
                            </div>
                        </td>
                        <td>
                            <div class='flex-col center rounded-corner-small'>
                                <input id="player_x_mon_3" placeholder="Mon #3" type="text" list="pokemonOptions">
                                <input id="player_x_mon_3_item" placeholder="Held Item (optional)" type="text" list="itemOptions">
                            </div>
                        </td>
                        <td>
                            <div class='flex-col center rounded-corner-small'>
                                <input id="player_x_mon_4" placeholder="Mon #4" type="text" list="pokemonOptions">
                                <input id="player_x_mon_4_item" placeholder="Held Item (optional)" type="text" list="itemOptions">
                            </div>
                        </td>
                        <td>
                            <div class='flex-col center rounded-corner-small'>
                                <input id="player_x_mon_5" placeholder="Mon #5" type="text" list="pokemonOptions">
                                <input id="player_x_mon_5_item" placeholder="Held Item (optional)" type="text" list="itemOptions">
                            </div>
                        </td>
                        <td>
                            <div class='flex-col center rounded-corner-small'>
                                <input id="player_x_mon_6" placeholder="Mon #6" type="text" list="pokemonOptions">
                                <input id="player_x_mon_6_item" placeholder="Held Item (optional)" type="text" list="itemOptions">
                            </div>
                        </td>
                    </tr>
                </template>
            </tbody>
        </table>
    </div>
  </body>
  <footer class="flex center">
    <span class="font-small">Developed by Professor <a href="https://www.skeletom.net" target="_blank">Tom "Skeletom" Farro</a> - Open Source: <a href="https://github.com/FomTarro/pkmn-stream-tools/tree/main/tournament-tracker" target="_blank">GitHub</a> - Contact: <a href="mailto:pokemon@skeletom.net?subject=About the Tournament Tracker">pokemon@skeletom.net</a></span>
  </footer>
  <script type="text/javascript" src="./js/species.js"></script>
  <script type="text/javascript" src="./js/utils.js"></script>
  <script type="text/javascript" src="./js/tom.js"></script>
  <script type="text/javascript" src="./js/players.js"></script>
  <script type="text/javascript" src="./js/obs-ws.min.js"></script>
  <script type="text/javascript" src="./js/obs.js"></script>
  <script type="text/javascript" src="./js/script.js"></script>
</html>
